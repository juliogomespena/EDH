<UserControl x:Class="EDH.Presentation.Common.Views.MainWindowMenuView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:EDH.Presentation.Common.Views"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:converters="clr-namespace:EDH.Presentation.Common.Resources.Converters"
             mc:Ignorable="d">

	<UserControl.Resources>
		<BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
		<converters:InverseBooleanToVisibilityConverter x:Key="InverseBooleanToVisibilityConverter"/>

		<Storyboard x:Key="MenuOpen">
			<DoubleAnimationUsingKeyFrames 
				Storyboard.TargetProperty="(FrameworkElement.Width)">
				<EasingDoubleKeyFrame KeyTime="0" Value="0"/>
				<EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="200"/>
			</DoubleAnimationUsingKeyFrames>
		</Storyboard>
		<Storyboard x:Key="MenuClose">
			<DoubleAnimationUsingKeyFrames 
				Storyboard.TargetProperty="(FrameworkElement.Width)">
				<EasingDoubleKeyFrame KeyTime="0" Value="200"/>
				<EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
			</DoubleAnimationUsingKeyFrames>
		</Storyboard>
	</UserControl.Resources>

	<!--Menu-->
	<Grid x:Name="MenuGrid" 
    HorizontalAlignment="Left" 
    Background="{DynamicResource MaterialDesign.Brush.Primary}"
    Visibility="{Binding MenuVisibility}">

		<!--Animation-->
		<Grid.Triggers>
			<EventTrigger RoutedEvent="ButtonBase.Click" SourceName="ButtonOpenMenu">
				<BeginStoryboard Storyboard="{DynamicResource MenuOpen}"/>
			</EventTrigger>
			<EventTrigger RoutedEvent="ButtonBase.Click" SourceName="ButtonCloseMenu">
				<BeginStoryboard Storyboard="{DynamicResource MenuClose}"/>
			</EventTrigger>
		</Grid.Triggers>

		<StackPanel>

			<!--Menu buttons-->
			<Grid Height="70">
				<!--Open menu button-->
				<Button x:Name="ButtonOpenMenu"
				        Command="{Binding OpenMenuCommand}"
				        Visibility="Hidden"
				        VerticalAlignment="Center" HorizontalAlignment="Right" 
				        Background="{x:Null}" 
				        BorderBrush="{x:Null}"
				        Style="{x:Null}">
					<materialDesign:PackIcon Kind="Menu" Width="45" Height="45" Foreground="White"/>
				</Button>

				<!--Close menu button-->
				<Button x:Name="ButtonCloseMenu"
		                Command="{Binding CloseMenuCommand}"
		                Visibility="{Binding ButtonCloseMenuVisibility}"
		                VerticalAlignment="Center" HorizontalAlignment="Right" 
		                Background="{x:Null}" 
		                BorderBrush="{x:Null}"
		                Style="{x:Null}">
					<materialDesign:PackIcon Kind="ArrowLeft" Width="45" Height="45" Foreground="White"/>
				</Button>

			</Grid>

			<!--Menu items-->
			<ItemsControl ItemsSource="{Binding MenuItems}" IsEnabled="{Binding IsMenuItemsEnabled}">
				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<Expander Background="{DynamicResource MaterialDesign.Brush.Primary}" Foreground="White" IsExpanded="{Binding IsExpanded}">
							<Expander.Header>
								<StackPanel Orientation="Horizontal">
									<materialDesign:PackIcon Kind="Paper" Width="25" Height="25"/>
									<TextBlock Text="{Binding Header}" 
                        Style="{DynamicResource MaterialDesignSubtitle2TextBlock}"
                        Margin="5 5 0 0"/>
								</StackPanel>
							</Expander.Header>
							<ItemsControl ItemsSource="{Binding SubItems}">
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<Button Content="{Binding Name}" Command="{Binding Command}" Foreground="White"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</ItemsControl>
						</Expander>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>

		</StackPanel>

	</Grid>

</UserControl>
